{% extends 'layout.html' %}
{% load static %}
{% block style %}
<style>
  .accordion-button{
    border-left: 2px solid gray;
    border-right: 2px solid gray;
  }
  .list-group-item{
    border-left: 2px solid gray;
    border-right: 2px solid gray;
  }

</style>
{% endblock %}
{% block content %}
<div  class="frm-body bg-white">
<div style="margin-top:1vh;" class="accordion accordion-flush" id="accordionPanelsStayOpenExample">
<!----ส่วนลดคงเหลือ---->
 <div class="accordion-item">
  <div class="accordion-header" id="panelsStayOpen-headingOne">
    <button style="border-left: 2px solid gray; border-right: 2px solid gray; border-top: 2px solid gray; border-top-left-radius: 25px; border-top-right-radius: 25px;" class="accordion-button " type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
      <strong class="text-primary">ส่วนลดคงเหลือ : ({{total_margin}}) บาท</strong>
    </button>
  </div>
  <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingOne">
    <div class="accordion-body">

      <li class="list-group-item" style="border-top: 2px solid gray; border-top-left-radius: 15px; border-top-right-radius: 15px;">
        <label >
           <strong>ส่วนลดตามรุ่น</strong> : <strong class="text-dark">{{productmargin}}</strong> บาท
        </label>
      </li> 
      <li class="list-group-item">
        <label >
           <strong>ส่วนเพิ่มส่วนลด</strong> : <strong class="text-success">{{total_addmargin}}</strong> บาท
        </label>
      </li> 
      <li class="list-group-item" style="border-bottom: 2px solid gray; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">
        <label >
           <strong>การใช้ส่วนลด</strong> : <strong class="text-danger">{{total_minmargin}}</strong> บาท
        </label>
      </li> 
      
    </div>
  </div>
</div>
<!------ส่วนเพิ่มส่วนลด-------->
  <div class="accordion-item">
    <h2 class="accordion-header" id="panelsStayOpen-headingA">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseA" aria-expanded="false" aria-controls="panelsStayOpen-collapseA">
        <strong class="text-success" >ส่วนเพิ่มส่วนลด : (+{{total_addmargin}}) บาท</strong>
      </button>
    </h2>
    <div id="panelsStayOpen-collapseA" class="accordion-collapse collapse " aria-labelledby="panelsStayOpen-headingA">
      <div class="accordion-body">

        <li class="list-group-item" style="border-top: 2px solid gray; border-top-left-radius: 15px; border-top-right-radius: 15px;">
            <label >
               <strong>บวกหัวค่าอุปกรณ์</strong> : <strong class="text-success">+{{add_eq}}</strong> บาท
            </label>
       </li> 
        <li class="list-group-item">
            <label >
               <strong>Kickback</strong> : <strong class="text-success">+{{add_kickback}}</strong> บาท
            </label>
       </li> 
        <li class="list-group-item" style="border-bottom: 2px solid gray; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">
            <label >
               <strong>Com ไฟเเนนซ์</strong> : <strong class="text-success">+{{total_com_finance}}</strong> บาท
            </label>
       </li> 

      </div>
    </div>
  </div>
<!-----การใช้ส่วนลด---->
  <div class="accordion-item">
    <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
        <strong class="text-danger" >การใช้ส่วนลด : (-{{total_minmargin}}) บาท</strong>
      </button>
    </h2>
    <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingTwo">
      <div class="accordion-body">

        <li class="list-group-item" style="border-top: 2px solid gray; border-top-left-radius: 15px; border-top-right-radius: 15px;">
          <label >
             <strong>ส่วนลดจากราคาขาย</strong> : <strong class="text-danger">-{{min_reduce}}</strong> บาท
          </label>
        </li>  
        <li class="list-group-item">
          <label >
             <strong>ของเเถม/อุปกรณ์ตกเเต่ง</strong> : <strong class="text-danger">-{{total_gift}}</strong> บาท
          </label>
        </li>  
        <li class="list-group-item">
          <label >
             <strong>ส่วนลดเงินดาวน์</strong> : <strong class="text-danger">-{{min_subdown}}</strong> บาท
          </label>
        </li>  
        <li class="list-group-item" style="border-bottom: 2px solid gray; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">
          <label >
             <strong>ค่า Subsidy</strong> : <strong class="text-danger">-{{sumsubsidy}}</strong> บาท 
          </label>
        </li> 
        
      </div>
    </div>
  </div>
  <!-------ค่าใช้จ่ายวันออกรถ------>
  <div class="accordion-item">
    <h2 class="accordion-header" id="panelsStayOpen-headingThree">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false" aria-controls="panelsStayOpen-collapseThree">
        <strong class="text-dark">ค่าใช้จ่ายวันออกรถ : {{total_exit}} บาท</strong>
      </button>
    </h2>
    <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingThree">
      <div class="accordion-body">
        {% if paytype == 'finance' %}
        <li class="list-group-item" style="border-top: 2px solid gray; border-top-left-radius: 15px; border-top-right-radius: 15px;" >
          <label >
             <strong>เงินดาวน์</strong> : <strong class="text-muted">{{exit_cost_down}}</strong> บาท
          </label>
        </li>
        {% endif %}
        {% if paytype == 'cash' %}
        <li class="list-group-item" style="border-top: 2px solid gray; border-top-left-radius: 15px; border-top-right-radius: 15px;">
          <label >
             <strong>ราคารถสุทธิ</strong> : <strong class="text-muted">{{exit_cost_down}}</strong> บาท
          </label>
        </li>
        {% endif %}
        <li class="list-group-item">
          <label >
             <strong>ค่าประกันภัย ชั้น 1</strong> : <strong class="text-success">ฟรี</strong>
          </label>
        </li> 
        <li class="list-group-item">
          <label >
             <strong>ค่า พ.ร.บ.</strong> : <strong class="text-success">ฟรี</strong>
          </label>
        </li>
        {% if min_regis == 'N' %}
        <li class="list-group-item">
          <label >
             <strong>ค่าจดทะเบียน</strong> : <strong class="text-muted">{{regiscost}}</strong> บาท
          </label>
        </li> 
        {% endif %}
        <li class="list-group-item">
          <label >
             <strong>ค่าประกันป้ายเเดง</strong> : <strong class="text-muted">3,000</strong> บาท
          </label>
        </li> 
        {% if paytype == 'finance' %}
        {% if condition_finance == 'BEGIN' %}
        <li class="list-group-item">
          <label >
             <strong>ค่างวดเเรก</strong> : <strong class="text-muted">{{month_payment}}</strong> บาท
          </label>
        </li> 
        {% endif %}
        {% if min_subdown_vat == 'N'  %} 
        <li class="list-group-item">
          <label >
             <strong>VAT 7% ดาวน์ </strong> : <strong class="text-muted">{{exit_cost_down_vat}}</strong> บาท
          </label>
        </li> 
        {% endif %}
        {% endif %}
        <li class="list-group-item" style="border-bottom: 2px solid gray; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">
          <label >
             <strong>หักเงินจอง</strong> : <strong class="text-muted">-{{gen_prepay}}</strong> บาท
          </label>
        </li> 
        
      </div>
    </div>
  </div>
 

<!------รายละเอียดเพิ่มเติม-------->
<div class="accordion-item">
  <h2 class="accordion-header" id="panelsStayOpen-headingFive">
    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseFive" aria-expanded="false" aria-controls="panelsStayOpen-collapseFive">
      <strong class="text-warning">รายละเอียดเพิ่มเติม</strong>
    </button>
  </h2>
  <div id="panelsStayOpen-collapseFive" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingFive">
    <div class="accordion-body">
      <table class="table table-hover text-center table-bordered border-dark">
        <thead class="table-warning table-bordered border-dark">
          <tr>
            <th scope="col">เงื่อนไข</th>
            <th scope="col">ค่างวด/เดือน</th>
            <th scope="col">ดอกเบี้ยทั้งหมด</th>
            <th scope="col">ค่าใช้จ่ายทั้งหมด</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">เงื่อนไข(1)</th>
            <td>{{month_payment}} บาท</td>
            <td>{{total_inter}} บาท</td>
            <td>{{net_total_payment}} บาท</td>
          </tr>
          {% if paytype == 'finance' %}
            {% if total_inter2 != '0' %}
            <tr>
              <th scope="row">เงื่อนไข(2)</th>
              <td>{{month_payment2}} บาท</td>
              <td>{{total_inter2}} บาท</td>
              <td>{{net_total_payment2}} บาท</td>
            </tr>
            {% endif %}
            {% if total_inter3 != '0' %}
            <tr>
              <th scope="row">เงื่อนไข(3)</th>
              <td>{{month_payment3}} บาท</td>
              <td>{{total_inter3}} บาท</td>
              <td>{{net_total_payment3}} บาท</td>
            </tr>
            {% endif %}
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>
</div>

  <!--------ข้อมูลการติดต่อ-------->
  <div class="accordion-item">

    <div id="panelsStayOpen-collapseX" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingX">
      <div class="accordion-body" style="border-top: 1px solid black">

        <li class="list-group-item" style="border-top: 2px solid gray; border-top-left-radius: 15px; border-top-right-radius: 15px;">
          <label >
             <strong>ผู้เสนอราคา</strong> : <strong class="text-dark">{{firstname}} / {{sellphone}}</strong>
          </label>
        </li> 
        <li class="list-group-item" style="border-bottom: 2px solid gray; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">
          <label >
             <strong>ลูกค้า</strong> : <strong class="text-dark">{{customername}} / {{contactcustomer}}</strong> 
          </label>
        </li> 
         
      </div>
    </div>
    <h2 class="accordion-header" id="panelsStayOpen-headingX">
      <button style="border-left: 2px solid gray; border-right: 2px solid gray; border-bottom: 2px solid gray; border-bottom-right-radius: 25px; border-bottom-left-radius: 25px;" class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseX" aria-expanded="false" aria-controls="panelsStayOpen-collapseX">
        <strong class="text-muted">ข้อมูลการติดต่อ</strong>
      </button>
    </h2>
    
  </div>

 
</div>
</div>

<div  class="frm-body bg-white">
<form method="POST" action="showdata"> 
{% csrf_token %}
<div class="d-flex">
  <div class="form-check form-check-inline">
    <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="quotation">
    <label class="form-check-label" for="inlineCheckbox1"><strong>ใบเสนอราคา</strong></label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="sellsummary">
    <label class="form-check-label" for="inlineCheckbox2"><strong>ใบสรุปการขาย(ต้นเเบบ)</strong></label>
  </div>
</div>
<div class="d-grid gap-1" style="margin-top: 1vh;">
  <button class="btn btn-primary" type="button"><strong>Download</strong></button>
</div>
</form>
</div>
{% endblock %}